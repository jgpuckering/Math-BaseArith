<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Math::BaseArith - Perl extension for mixed-base number representation (like APL encode/decode)</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:" />
</head>

<body>



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#FUNCTIONS">FUNCTIONS</a>
    <ul>
      <li><a href="#encode_base">encode_base</a></li>
      <li><a href="#decode_base">decode_base</a></li>
    </ul>
  </li>
  <li><a href="#DEPRECATED-FUNCTIONS">DEPRECATED FUNCTIONS</a></li>
  <li><a href="#COMPATIBILITY">COMPATIBILITY</a></li>
  <li><a href="#EXPORT">EXPORT</a></li>
  <li><a href="#DEBUGGING">DEBUGGING</a></li>
  <li><a href="#LIMITATIONS">LIMITATIONS</a></li>
  <li><a href="#SEE-ALSO">SEE ALSO</a></li>
  <li><a href="#AUTHOR">AUTHOR</a></li>
  <li><a href="#COPYRIGHT">COPYRIGHT</a></li>
  <li><a href="#LICENSE">LICENSE</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>Math::BaseArith - Perl extension for mixed-base number representation (like APL encode/decode)</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<pre><code>  use Math::BaseArith qw( :all );

  encode_base( value, base_listref );

  decode_base( representation_listref, base_listref );</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>The inspiration for this module is a pair of functions in the APL programming language called encode (a.k.a. &quot;represent&quot; or &quot;antibase)&quot; and decode (a.k.a. base). Their principal use is to convert numbers from one number base to another. Mixed number bases are permitted.</p>

<p>In this perl implementation, the representation of a number in a particular number base consists of a list refence (listref) whose elements are the digit values in that base. For example, the decimal number 31 would be expressed in binary as a list of five ones with any number of leading zeros: [0, 0, 0, 1, 1, 1, 1, 1]. The same number expressed as three hexadecimal (base 16) digits would be [0, 1, 15], while in base 10 it would be [0, 3, 1]. Fifty-one inches would be expressed in yards, feet, inches as [1, 1, 3], an example of a mixed number base.</p>

<p>In the following description of encode_base and decode_base, Q will mean an abstract value or quantity, R will be its representation and B will define the number base. Q will be a perl scalar; R and B are perl lists. The values in R correspond to the radix values in B.</p>

<p>In the examples below, assume the output of <b>print</b> has been altered by setting $, = &#39; &#39; and that <code>=&gt;</code> is your shell prompt.</p>

<h1 id="FUNCTIONS">FUNCTIONS</h1>

<h2 id="encode_base">encode_base</h2>

<p>Encode_base is used to represent a number in one or more number bases. The first argument is the number to be converted, and the second argument defines the base (or bases) to be used for the representation. Consider first the representation of a scalar in a single uniform number base:</p>

<pre><code>    print encode_base( 2, [2, 2, 2, 2] )
    =&gt; 0 0 1 0

    print encode_base( 5, [2, 2, 2, 2] )
    =&gt; 0 1 0 1

    print encode_base( 13, [2, 2, 2, 2] )
    =&gt; 1 1 0 1

    print encode_base( 62, [16, 16, 16] )
    =&gt; 0 3 14</code></pre>

<p>The second argument is called the base list. The length of the base list determines the number of digits in the representation of the first argument. No error occurs if the length is insufficient to give a proper representation of the number. Exploring this situation will suggest other uses of encode_base, and may clarify the use of encode_base with mixed number bases.</p>

<pre><code>    # The representation of 75 in base 4
    print encode_base( 75, [4, 4, 4, 4] )
    =&gt; 1 0 2 3

    # At least four digits are needed for the full representation
    print encode_base( 75, [4, 4, 4] )
    =&gt; 0 2 3

    # If fewer elements are in the second argument,
    # leading digits do not appear in the representation.
    print encode_base( 75, [4, 4] )
    =&gt; 2 3

    # If the second argument is a one-element listref, encode_base is identical
    # to modulus (%)
    print encode_base( 75, [4] )
    =&gt; 3
    print encode_base( 76, [4] )
    =&gt; 0

    # The expression encode_base( Q, [0] ) always yields Q as the result
    print encode_base ( 75, [0] )
    =&gt; 75

    # This usage returns quotient and remainder
    print encode_base( 75, [0, 4] )
    =&gt; 18 3

    # The first quotient (18) is again divided by 4,
    # yielding a second quotient and remainder
    print encode_base( 75, [0, 4, 4] )
    =&gt; 4 2 3

    # The process is repeated again. Since the last quotient
    # is less than 4, the result is the same as encode_base(75,[4,4,4,4])
    print encode_base( 75, [0, 4, 4, 4] )
    =&gt; 1 0 2 3</code></pre>

<p>Now consider a mixed number base: convert 175 inches into yards, feet, inches.</p>

<pre><code>    # 175 inches is 14 feet, 7 inches (quotient and remainder).
    print encode_base( 175, [0, 12] )
    =&gt; 14 7

    # 14 feet is 4 yards, 2 feet,
    print encode_base( 14, [0, 3] )
    =&gt; 4 2

    # so 175 inches is 4 yards, 2 feet, 7 inches.
    print encode_base( 175, [0, 3, 12] )
    =&gt; 4 2 7</code></pre>

<h2 id="decode_base">decode_base</h2>

<p>decode_base is used to determine the value of the representation of a quantity in some number base. If <b>R</b> is a list representation (perhaps produced by the encode_base function described above) of some quantity <b>Q</b> in a number base defined by the radix list <b>B</b> (i.e., <code>@R = encode_base($Q,@B)</code>, then the expression <code>decode_base(@R,@B)</code> yields <code>$Q</code>:</p>

<pre><code>    print decode_base( [0, 0, 1, 0], [2, 2, 2, 2] )
    =&gt; 2

    print decode_base( [0, 1, 0, 1], [2, 2, 2, 2] )
    =&gt; 5

    print decode_base( [0, 3, 14], [16, 16, 16]
    =&gt; 62</code></pre>

<p>The length of the representation list must be less than or equal to that of the base list.</p>

<pre><code>    print decode_base( [1, 1, 1, 1], [2, 2, 2, 2] )
    =&gt; 15

    print decode_base( [1, 1, 1, 1], [2] )
    =&gt; 15

    print decode_base( [1], [2, 2, 2, 2] )
    =&gt; 15

    print decode_base( [1, 1, 1, 1], [2, 2, 2] )
    =&gt; (void)
    raises a LENGTH ERROR</code></pre>

<p>As with the encode_base function, mixed number bases can be used:</p>

<pre><code>    # Convert 4 yards, 2 feet, 7 inches to inches.
    print decode_base( [4, 2, 7], [0, 3, 12] )
    =&gt; 175


    # Convert 2 days, 3 hours, 5 minutes, and 27 seconds to seconds
    print decode_base( [2, 3, 5, 27], [0, 24, 60, 60] )
    =&gt; 183927

    # or to minutes.
    print decode_base( [2, 3, 5, 27], [0, 24, 60, 60] ) / 60
    =&gt; 3065.45</code></pre>

<p>The first element of the radix list (second argument) is not used; it is required only to make the lengths match and so can be any value.</p>

<h1 id="DEPRECATED-FUNCTIONS">DEPRECATED FUNCTIONS</h1>

<dl>

<dt id="encode">encode</dt>
<dd>

</dd>
<dt id="decode">decode</dt>
<dd>

</dd>
</dl>

<p>Synonmous with encode_base/decode_base. Imported by default. See COMPATIBILITY for details.</p>

<h1 id="COMPATIBILITY">COMPATIBILITY</h1>

<p>When this module was originally released on CPAN in 2002, it exported the functions encode and decode by default. These function names, however, are fairly common and so have a high probability of colliding in the global namespace with those from other modules. As of version 1.02, the functions were renamed encode_base and decode_base in order to better distinguish them.</p>

<p>For upward compatibility, encode/decode are provided as aliases for encode_base/decode_base and are still exported by default so scripts that include the module by:</p>

<pre><code>    use Math::BaseArith;</code></pre>

<p>will continue to work unchanged. See the EXPORT section for the preferred way to include the module from version 1.02 ownward.</p>

<p>Note the the keyword :old can be used to specify the old function names (encode/decode). The most likely use of this is to exclude them from the namespace so you can then include just one of them. For example, to get decode without encode you can do this:</p>

<pre><code>    use Math::BaseArith qw( !:old decode );</code></pre>

<p>But, rather than this approach, consider altering your code to use the new and preferred function names.</p>

<h1 id="EXPORT">EXPORT</h1>

<p>As of version 1.02 and above, the preferred way to include this module is by using :all, or specifying you want either encode_base or decode_base:</p>

<pre><code>    use Math::BaseArith &#39;:all&#39;;
or
    use Math::BaseArith &#39;encode_base&#39;;
or
    use Math::BaseArith &#39;decode_base&#39;;
    </code></pre>

<p>Do NOT include it without parameters, as that will automatically import the old function names encode/decode.</p>

<h1 id="DEBUGGING">DEBUGGING</h1>

<p>Set the global variable $Math::BaseArith::DEBUG to print debugging information to STDERR.</p>

<p>If set to 1, function names and parameters are printed.</p>

<p>If set to 2, intermediate results are also printed.</p>

<h1 id="LIMITATIONS">LIMITATIONS</h1>

<p>The APL encode function allows both arguments to be a list, in which case the function evaluates in dot-product fashion, generating a matrix whose columns are the representation vectors for each value in the value list; i.e. a call such as encode_base([15,31,32,33,75],[4,4,4,4]) would generate the following matrix;</p>

<pre><code>        0 0 0 0 1
        0 1 2 2 0
        3 3 0 0 2
        3 3 0 1 3</code></pre>

<p>This version of encode_base supports only a scalar value as the first argument.</p>

<p>The APL version of decode support non-integer values. This version doesn&#39;t.</p>

<h1 id="SEE-ALSO">SEE ALSO</h1>

<p><a href="https://aplwiki.com/wiki/Encode">https://aplwiki.com/wiki/Encode</a></p>

<p><a href="https://aplwiki.com/wiki/Decode">https://aplwiki.com/wiki/Decode</a></p>

<h1 id="AUTHOR">AUTHOR</h1>

<p>Gary Puckering &lt;jgpuckering@rogers.com&gt;</p>

<h1 id="COPYRIGHT">COPYRIGHT</h1>

<p>Copyright (c) 2002, Gary Puckering. All rights reserved.</p>

<h1 id="LICENSE">LICENSE</h1>

<p>This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself. See:</p>

<p><a href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a></p>

<p><a href="http://www.perl.com/language/misc/Artistic.html">http://www.perl.com/language/misc/Artistic.html</a></p>


</body>

</html>


